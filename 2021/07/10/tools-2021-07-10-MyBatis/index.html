<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>MyBatis | Hexo</title>
  <meta name="description" content="说明本文档参考自尚硅谷的MyBatis教程及资料。 一、简介MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架。 MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。 MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录. 历">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis">
<meta property="og:url" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="说明本文档参考自尚硅谷的MyBatis教程及资料。 一、简介MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架。 MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。 MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录. 历">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827155957244.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160007846.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160025021.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160052968.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630051317451.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160303396.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160307658.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160458808.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160514593.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160525107.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160534352.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160725218.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160804248.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160831404.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160843294.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630051774191.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161019583.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161031778.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161044356.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161054884.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161154902.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161223586.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161256784.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image004-1630052005856.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161410842.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161421063.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161442791.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161459699.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161504792.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161515100.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161532034.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161607269.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161617091.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161631139.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161641580.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052212611.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161710542.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161729831.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161810696.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161815376.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image001.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052418975.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827162026702.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827162436930.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052927070.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image006.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052993212.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827163028567.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image001-1630053471879.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630053499454.jpg">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827163935288.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827163947690.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827164217621.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827164223727.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827164942993.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165006096.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165046292.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/clip_image003-1630054212655.gif">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165052918.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165057673.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165107889.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165112179.png">
<meta property="og:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165142094.png">
<meta property="article:published_time" content="2021-07-10T13:06:15.000Z">
<meta property="article:modified_time" content="2021-08-27T10:14:58.806Z">
<meta property="article:author" content="stary">
<meta property="article:tag" content="MyBatis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/image-20210827155957244.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://stary1999.github.io" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">stary</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">愿启明星照亮信仰，照进现实</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Jiangsu, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/stary" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p> </br> <p>博客迁移，功能尚未完善，评论无效</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/2021%E8%AF%BE%E8%AE%BE/">2021课设</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/default/">default</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%AD%E8%A8%80/">语言</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDN/" rel="tag">SDN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot2/" rel="tag">SpringBoot2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud/" rel="tag">SpringCloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/" rel="tag">android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/default/" rel="tag">default</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/" rel="tag">idea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsp/" rel="tag">jsp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/" rel="tag">jvm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springCloud/" rel="tag">springCloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E9%AA%8C/" rel="tag">实验</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">心得</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8B%82%E7%A5%9E/" rel="tag">狂神</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BE%A4%E9%9B%86/" rel="tag">群集</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag">语法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/" rel="tag">课程设计</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E5%9D%91/" rel="tag">踩坑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag">项目</a><span class="tag-list-count">4</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Java/" style="font-size: 13px;">Java</a> <a href="/tags/MyBatis/" style="font-size: 13px;">MyBatis</a> <a href="/tags/Redis/" style="font-size: 13px;">Redis</a> <a href="/tags/SDN/" style="font-size: 13px;">SDN</a> <a href="/tags/SpringBoot/" style="font-size: 13px;">SpringBoot</a> <a href="/tags/SpringBoot2/" style="font-size: 13px;">SpringBoot2</a> <a href="/tags/SpringCloud/" style="font-size: 13px;">SpringCloud</a> <a href="/tags/android/" style="font-size: 13px;">android</a> <a href="/tags/default/" style="font-size: 14px;">default</a> <a href="/tags/docker/" style="font-size: 13px;">docker</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/github/" style="font-size: 13px;">github</a> <a href="/tags/hexo/" style="font-size: 13px;">hexo</a> <a href="/tags/idea/" style="font-size: 13px;">idea</a> <a href="/tags/java/" style="font-size: 13.8px;">java</a> <a href="/tags/jsp/" style="font-size: 13px;">jsp</a> <a href="/tags/jvm/" style="font-size: 13px;">jvm</a> <a href="/tags/markdown/" style="font-size: 13px;">markdown</a> <a href="/tags/springCloud/" style="font-size: 13px;">springCloud</a> <a href="/tags/ubuntu/" style="font-size: 13px;">ubuntu</a> <a href="/tags/vue/" style="font-size: 13px;">vue</a> <a href="/tags/web/" style="font-size: 13px;">web</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 13px;">入门</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 13px;">前端</a> <a href="/tags/%E5%AE%9E%E8%B7%B5/" style="font-size: 13.2px;">实践</a> <a href="/tags/%E5%AE%9E%E9%AA%8C/" style="font-size: 13px;">实验</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 13.4px;">工具</a> <a href="/tags/%E5%BF%83%E5%BE%97/" style="font-size: 13px;">心得</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 13px;">数据库</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 13px;">日志</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 13.2px;">框架</a> <a href="/tags/%E7%8B%82%E7%A5%9E/" style="font-size: 13px;">狂神</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 13.2px;">笔记</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 13px;">网络</a> <a href="/tags/%E7%BE%A4%E9%9B%86/" style="font-size: 13px;">群集</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 13px;">语法</a> <a href="/tags/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/" style="font-size: 13px;">课程设计</a> <a href="/tags/%E8%B8%A9%E5%9D%91/" style="font-size: 13px;">踩坑</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 13.4px;">面试</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 13.6px;">项目</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/2021/08/26/project-2021-08-26-EVENGOfNetwork/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/26/project-2021-08-26-EVENGOfNetwork/" class="title">EVE-NG仿真路由组网与交换机配置</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-26T05:40:34.000Z" itemprop="datePublished">2021-08-26</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/08/26/project-2021-08-26-windowsServerHyperV/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/26/project-2021-08-26-windowsServerHyperV/" class="title">基于windows server搭建的故障群集转移</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-26T05:31:28.000Z" itemprop="datePublished">2021-08-26</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/08/26/project-2021-08-26-dockerOfDeploy/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/26/project-2021-08-26-dockerOfDeploy/" class="title">docker实现企业服务负载均衡架构</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-26T05:31:04.000Z" itemprop="datePublished">2021-08-26</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/08/26/project-2021-08-26-PerceptionAndControl/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/26/project-2021-08-26-PerceptionAndControl/" class="title">感知与控制（快递柜）</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-26T05:29:47.000Z" itemprop="datePublished">2021-08-26</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2021/08/26/project-2021-08-26-androidAndIoT/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a>
              </p>
              <p class="item-title">
                <a href="/2021/08/26/project-2021-08-26-androidAndIoT/" class="title">远程数据采集控制（android）</a>
              </p>
              <p class="item-date">
                <time datetime="2021-08-26T05:28:03.000Z" itemprop="datePublished">2021-08-26</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-number"></span> <span class="toc-text">一、简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2"><span class="toc-number">0.0.1.</span> <span class="toc-text">历史</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8MyBatis%EF%BC%9F"><span class="toc-number">0.0.2.</span> <span class="toc-text">为什么要使用MyBatis？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hibernate%E5%92%8CJPA"><span class="toc-number">0.0.3.</span> <span class="toc-text">Hibernate和JPA</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81HelloWord"><span class="toc-number"></span> <span class="toc-text">二、HelloWord</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">MyBatis操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">1.1.</span> <span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HelloWorld-%E6%8E%A5%E5%8F%A3%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">HelloWorld-接口式编程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8SqlSession%E8%8E%B7%E5%8F%96%E6%98%A0%E5%B0%84%E5%99%A8%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">使用SqlSession获取映射器进行操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SqlSession"><span class="toc-number">1.2.1.</span> <span class="toc-text">SqlSession</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81MyBatis-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number"></span> <span class="toc-text">三、MyBatis-全局配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#setting%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">setting设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">日期类型的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#plugins%E6%8F%92%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">plugins插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#environments%E7%8E%AF%E5%A2%83"><span class="toc-number">4.</span> <span class="toc-text">environments环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mapper%E6%98%A0%E5%B0%84"><span class="toc-number">5.</span> <span class="toc-text">mapper映射</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81MyBatis-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number"></span> <span class="toc-text">四、MyBatis-映射文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#insert%E3%80%81update%E3%80%81delete%E5%85%83%E7%B4%A0"><span class="toc-number">1.</span> <span class="toc-text">insert、update、delete元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%94%9F%E6%88%90%E6%96%B9%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">主键生成方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#selectKey"><span class="toc-number">3.</span> <span class="toc-text">selectKey</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">参数处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84"><span class="toc-number">5.</span> <span class="toc-text">自动映射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#id-amp-result"><span class="toc-number">6.</span> <span class="toc-text">id &amp; result</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81MyBatis-%E5%8A%A8%E6%80%81SQL"><span class="toc-number"></span> <span class="toc-text">五、MyBatis-动态SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if"><span class="toc-number">1.</span> <span class="toc-text">if</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bind"><span class="toc-number">2.</span> <span class="toc-text">bind</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81MyBatis-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-number"></span> <span class="toc-text">六、MyBatis-缓存机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7"><span class="toc-number">1.</span> <span class="toc-text">缓存相关属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E6%9C%89%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">缓存有关设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81MyBatis-Spring%E6%95%B4%E5%90%88"><span class="toc-number"></span> <span class="toc-text">七、MyBatis-Spring整合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E5%90%88%E5%85%B3%E9%94%AE%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">整合关键配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81MyBatis-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="toc-number"></span> <span class="toc-text">八、MyBatis-逆向工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MBG%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">0.1.</span> <span class="toc-text">MBG配置文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9DMyBatis-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number"></span> <span class="toc-text">九MyBatis-工作原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81MyBatis-%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91"><span class="toc-number"></span> <span class="toc-text">十、MyBatis-插件开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E5%8E%9F%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">插件原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Interceptor%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.</span> <span class="toc-text">Interceptor接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89TypeHandler%E5%A4%84%E7%90%86%E6%9E%9A%E4%B8%BE"><span class="toc-number">4.</span> <span class="toc-text">自定义TypeHandler处理枚举</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-tools-2021-07-10-MyBatis" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      MyBatis
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/07/10/tools-2021-07-10-MyBatis/" class="article-date">
	  <time datetime="2021-07-10T13:06:15.000Z" itemprop="datePublished">2021-07-10</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/MyBatis/" rel="tag">MyBatis</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/07/10/tools-2021-07-10-MyBatis/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 7.9k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 31(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>本文档参考自尚硅谷的MyBatis教程及资料。</p>
<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架。</p>
<p>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。</p>
<p>MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录.</p>
<h4 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h4><p>原是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation 迁移到了Google Code，随着开发团队转投Google Code 旗下， iBatis3.x正式更名为MyBatis ，代码于2013年11月迁移到Github（下载地址见后）。</p>
<p>iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。 iBatis提供的持久层框架包括SQL Maps和Data Access Objects（DAO）</p>
<h4 id="为什么要使用MyBatis？"><a href="#为什么要使用MyBatis？" class="headerlink" title="为什么要使用MyBatis？"></a>为什么要使用MyBatis？</h4><p>MyBatis是一个半自动化的持久化层框架。</p>
<p>JDBC</p>
<p>–   SQL夹在Java代码块里，耦合度高导致硬编码内伤</p>
<p>–   维护不易且实际开发需求中sql是有变化，频繁修改的情况多见</p>
<h4 id="Hibernate和JPA"><a href="#Hibernate和JPA" class="headerlink" title="Hibernate和JPA"></a>Hibernate和JPA</h4><p>–   长难复杂SQL，对于Hibernate而言处理也不容易</p>
<p>–   内部自动生产的SQL，不容易做特殊优化。</p>
<p>–   基于全映射的全自动框架，大量字段的POJO进行部分映射时比较困难。导致数据库性能下降。</p>
<p>对开发人员而言，核心sql还是需要自己优化</p>
<p>sql和java编码分开，功能边界清晰，一个专注业务、一个专注数据。</p>
<p>地址：<a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3/">https://github.com/mybatis/mybatis-3/</a></p>
<h1 id="二、HelloWord"><a href="#二、HelloWord" class="headerlink" title="二、HelloWord"></a>二、HelloWord</h1><p>–  创建一张测试表</p>
<p>–  创建对应的javaBean</p>
<p>–  创建mybatis配置文件，sql映射文件</p>
<p>–  测试</p>
<h2 id="MyBatis操作数据库"><a href="#MyBatis操作数据库" class="headerlink" title="MyBatis操作数据库"></a>MyBatis操作数据库</h2><p>1、创建MyBatis全局配置文件</p>
<p>–  MyBatis 的全局配置文件包含了影响 MyBatis 行为甚深的设置（settings）和属性（properties）信息、如数据库连接池信息等。指导着MyBatis进行工作。我们可以参照官方文件的配置示例。</p>
<p>2、创建SQL映射文件</p>
<p>–  映射文件的作用就相当于是定义Dao接口的实现类如何工作。这也是我们使用MyBatis时编写的最多的文件。</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>1、根据全局配置文件，利用SqlSessionFactoryBuilder创建SqlSessionFactory</p>
<p> <img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827155957244.png" alt="image-20210827155957244"></p>
<p>2、使用SqlSessionFactory获取sqlSession对象。一个SqlSession对象代表和数据库的一次会话。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160007846.png" alt="image-20210827160007846"></p>
<p>使用SqlSession根据方法id进行操作</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160025021.png" alt="image-20210827160025021"></p>
<h4 id="HelloWorld-接口式编程"><a href="#HelloWorld-接口式编程" class="headerlink" title="HelloWorld-接口式编程"></a>HelloWorld-接口式编程</h4><p>–  创建一个Dao接口</p>
<p>–  修改Mapper文件</p>
<p>–  测试</p>
<h3 id="使用SqlSession获取映射器进行操作"><a href="#使用SqlSession获取映射器进行操作" class="headerlink" title="使用SqlSession获取映射器进行操作"></a>使用SqlSession获取映射器进行操作</h3><p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160052968.png" alt="image-20210827160052968"></p>
<h4 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h4><p>SqlSession 的实例<strong>不是线程安全</strong>的，因此是不能被共享的。</p>
<p>SqlSession每次<strong>使用完成后需要正确关闭</strong>，这个关闭操作是必须的</p>
<p>SqlSession可以直接调用方法的id进行数据库操 作，但是我们一般还是推荐使用SqlSession获取到Dao接口的代理类，执行代理对象的方法，可以更安全的进行类型检查操作</p>
<h1 id="三、MyBatis-全局配置文件"><a href="#三、MyBatis-全局配置文件" class="headerlink" title="三、MyBatis-全局配置文件"></a>三、MyBatis-全局配置文件</h1><p>MyBatis 的配置文件包含了影响 MyBatis 行为甚深的设置（settings）和属性（properties）信息。文档的顶层结构如下：</p>
<p>•       configuration 配置</p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#properties">properties 属性</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#settings">settings 设置</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#typeAliases">typeAliases 类型命名</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlers 类型处理器</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactory 对象工厂</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#plugins">plugins 插件</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#environments">environments 环境</a></p>
<p>•   environment 环境变量</p>
<p>•   transactionManager 事务管理器</p>
<p>•   dataSource 数据源</p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#databaseIdProvider">databaseIdProvider 数据库厂商标识</a></p>
<p>•    <a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#mappers">mappers 映射器</a></p>
<p>在Eclipse中引入XML的dtd约束文件，方便编写XML的时候有提示</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630051317451.jpg" alt="img"></p>
<p><strong>properties属性</strong></p>
<p> <img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160303396.png" alt="image-20210827160303396"></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160307658.png" alt="image-20210827160307658"></p>
<p>如果属性在不只一个地方进行了配置，那么 MyBatis 将按照下面的顺序来加载：</p>
<p>–   在 properties 元素体内指定的属性首先被读取。</p>
<p>–   然后根据 properties 元素中的 resource 属性读取类路径下属性文件或根据 url 属性指定的路径读取属性文件，并覆盖已读取的同名属性。</p>
<p>–   最后读取作为方法参数传递的属性，并覆盖已读取的同名属性。</p>
<h2 id="setting设置"><a href="#setting设置" class="headerlink" title="setting设置"></a>setting设置</h2><p>这是 MyBatis 中极为重要的调整设置，它们会改变MyBatis 的运行时行为</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160458808.png" alt="image-20210827160458808"></p>
<p><strong>typeAliases别名处理器</strong></p>
<p>•  类型别名是为 Java 类型设置一个短的名字，可以方便我们引用某个类。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160514593.png" alt="image-20210827160514593"></p>
<p>类很多的情况下，可以批量设置别名这个包下的每一个类创建一个默认的别名，就是简单类名小写</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160525107.png" alt="image-20210827160525107"></p>
<p>•  也可以使用@Alias注解为其指定一个别名</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160534352.png" alt="image-20210827160534352"></p>
<p>值得注意的是，MyBatis已经为许多常见的 Java 类型内建了相应的类型别名。它们都是大小写不敏感的，我们在起别名的时候千万不要占用已有的别名</p>
<table>
<thead>
<tr>
<th>别名</th>
<th>映射的类型</th>
</tr>
</thead>
<tbody><tr>
<td>_byte</td>
<td>byte</td>
</tr>
<tr>
<td>_long</td>
<td>long</td>
</tr>
<tr>
<td>_short</td>
<td>short</td>
</tr>
<tr>
<td>_int</td>
<td>int</td>
</tr>
<tr>
<td>_integer</td>
<td>int</td>
</tr>
<tr>
<td>_double</td>
<td>double</td>
</tr>
<tr>
<td>_float</td>
<td>float</td>
</tr>
<tr>
<td>_boolean</td>
<td>boolean</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>string</th>
<th>String</th>
</tr>
</thead>
<tbody><tr>
<td>byte</td>
<td>Byte</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
</tr>
<tr>
<td>int</td>
<td>Integer</td>
</tr>
<tr>
<td>integer</td>
<td>Integer</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>date</th>
<th>Date</th>
</tr>
</thead>
<tbody><tr>
<td>decimal</td>
<td>BigDecimal</td>
</tr>
<tr>
<td>bigdecimal</td>
<td>BigDecimal</td>
</tr>
<tr>
<td>object</td>
<td>Object</td>
</tr>
<tr>
<td>map</td>
<td>Map</td>
</tr>
<tr>
<td>hashmap</td>
<td>HashMap</td>
</tr>
<tr>
<td>list</td>
<td>List</td>
</tr>
<tr>
<td>arraylist</td>
<td>ArrayList</td>
</tr>
<tr>
<td>collection</td>
<td>Collection</td>
</tr>
<tr>
<td>iterator</td>
<td>Iterator</td>
</tr>
</tbody></table>
<p><strong>typeHandlers类型处理器</strong></p>
<p>•     无论是 MyBatis 在预处理语句（PreparedStatement）中</p>
<p>设置一个参数时，还是从结果集中取出一个值时， 都会</p>
<p>用类型处理器将获取的值以合适的方式转换成 Java 类型。</p>
<table>
<thead>
<tr>
<th>类型处理器</th>
<th>Java  类型</th>
<th>JDBC  类型</th>
</tr>
</thead>
<tbody><tr>
<td>BooleanTypeHandler</td>
<td>java.lang.Boolean, boolean</td>
<td>数据库兼容的BOOLEAN</td>
</tr>
<tr>
<td>ByteTypeHandler</td>
<td>java.lang.Byte, byte</td>
<td>数据库兼容的NUMERIC 或BYTE</td>
</tr>
<tr>
<td>ShortTypeHandler</td>
<td>java.lang.Short, short</td>
<td>数据库兼容的 NUMERIC 或SHORT INTEGER</td>
</tr>
<tr>
<td>IntegerTypeHandler</td>
<td>java.lang.Integer, int</td>
<td>数据库兼容的NUMERIC 或INTEGER</td>
</tr>
<tr>
<td>LongTypeHandler</td>
<td>java.lang.Long, long</td>
<td>数据库兼容的NUMERIC 或LONG INTEGER</td>
</tr>
<tr>
<td>FloatTypeHandler</td>
<td>java.lang.Float, float</td>
<td>数据库兼容的NUMERIC 或 FLOAT</td>
</tr>
<tr>
<td>DoubleTypeHandler</td>
<td>java.lang.Double, double</td>
<td>数据库兼容的NUMERIC 或 DOUBLE</td>
</tr>
<tr>
<td>BigDecimalTypeHandler</td>
<td>java.math.BigDecimal</td>
<td>数据库兼容的NUMERIC 或 DECIMAL</td>
</tr>
<tr>
<td>StringTypeHandler</td>
<td>java.lang.String</td>
<td>CHAR,  VARCHAR</td>
</tr>
</tbody></table>
<h2 id="日期类型的处理"><a href="#日期类型的处理" class="headerlink" title="日期类型的处理"></a>日期类型的处理</h2><p>日期和时间的处理，JDK1.8以前一直是个头疼的问题。我们通常使用JSR310规范领导者Stephen Colebourne创建的Joda-Time来操作。1.8已经实现全部的JSR310规范了。</p>
<p>•      日期时间处理上，我们可以使用MyBatis基于JSR310（Date and Time API）编写的各种日期时间类型处理器。</p>
<p>•      MyBatis3.4以前的版本需要我们手动注册这些处 理器，以后的版本都是自动注册的</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160725218.png" alt="image-20210827160725218"></p>
<p><strong>自定义类型处理器</strong></p>
<p>我们可以重写类型处理器或创建自己的类型处理 器来处理不支持的或非标准的类型。</p>
<p>步骤：</p>
<p>1）、实现org.apache.ibatis.type.TypeHandler接口或者继承org.apache.ibatis.type.BaseTypeHandler</p>
<p>2）、指定其映射某个JDBC类型（可选操作）</p>
<p>3）、在mybatis全局配置文件中注册</p>
<h2 id="plugins插件"><a href="#plugins插件" class="headerlink" title="plugins插件"></a>plugins插件</h2><p>插件是MyBatis提供的一个非常强大的机制，我们可以通过插件来修改MyBatis的一些核心行为。插件通过动态代理机制，可以介入四大对象的任何一个方法的执行。后面会有专门的章节我们来介绍mybatis运行原理以及插件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Executor (update, query, flushStatements, commit, rollback,getTransaction, close, isClosed);</span><br><span class="line">ParameterHandler (getParameterObject, setParameters);</span><br><span class="line">ResultSetHandler (handleResultSets, handleOutputParameters);</span><br><span class="line">StatementHandler (prepare, parameterize, batch, update, query);</span><br></pre></td></tr></table></figure>



<h2 id="environments环境"><a href="#environments环境" class="headerlink" title="environments环境"></a>environments环境</h2><p>MyBatis可以配置多种环境，比如开发、测试和生产环境需要有不同的配置。每种环境使用一个environment标签进行配置并指 定唯一标识符。可以通过environments标签中的default属性指定一个环境的标识符来快速的切换环境</p>
<p><strong>environment-指定具体环境</strong></p>
<p>id：指定当前环境的唯一标识</p>
<p>transactionManager、和dataSource都必须有</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160804248.png" alt="image-20210827160804248"></p>
<p>transactionManager</p>
<p>•      type： JDBC | MANAGED | 自定义</p>
<p>–  JDBC：使用了 JDBC 的提交和回滚设置，依赖于从数据源得到的连接来管理事务范围。JdbcTransactionFactory</p>
<p>–  MANAGED：不提交或回滚一个连接、让容器来管理 事务的整个生命周期（比如 JEE 应用服务器的上下文）。 ManagedTransactionFactory</p>
<p>–  自定义：实现TransactionFactory接口，type=全类名/ 别名</p>
<p>dataSource</p>
<p>type： UNPOOLED | POOLED | JNDI | 自定义</p>
<p>–  UNPOOLED：不使用连接池， UnpooledDataSourceFactory</p>
<p>–  POOLED：使用连接池， PooledDataSourceFactory</p>
<p>–  JNDI： 在EJB 或应用服务器这类容器中查找指定的数据源</p>
<p>–  自定义：实现DataSourceFactory接口，定义数据源的获取方式。</p>
<p>•      实际开发中我们使用Spring管理数据源，并进行事务控制的配置来覆盖上述配置</p>
<p><strong>databaseIdProvider环境</strong></p>
<p>•  MyBatis 可以根据不同的数据库厂商执行不同的语句。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160831404.png" alt="image-20210827160831404"></p>
<p>•  Type： DB_VENDOR</p>
<p>– 使用MyBatis提供的VendorDatabaseIdProvider解析数据库厂商标识。也可以实现DatabaseIdProvider接口来自定义。</p>
<p>•  Property-name：数据库厂商标识</p>
<p>•  Property-value：为标识起一个别名，方便SQL语句使用</p>
<p>databaseId属性引用</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827160843294.png" alt="image-20210827160843294"></p>
<p>•     <strong>DB_VENDOR</strong></p>
<p>–    会通过 <strong>DatabaseMetaData#getDatabaseProductName()</strong> 返回的字符串进行设置。由于通常情况下这个字符串都非常长而且相同产品的不同版本会返回不同的值，所以最好通过设置属性别名来使其变短</p>
<p>•     MyBatis匹配规则如下：</p>
<p>–    1、如果没有配置databaseIdProvider标签，那么databaseId=null</p>
<p>–    2、如果配置了databaseIdProvider标签，使用标签配置的name去匹配数据库信息，匹配上设置databaseId=配置指定的值，否则依旧为null</p>
<p>–    3、如果databaseId不为null，他只会找到配置databaseId的sql语句</p>
<p>–    4、MyBatis 会加载不带 databaseId 属性和带有匹配当前数据库databaseId 属性的所有语句。如果同时找到带有 databaseId 和不带databaseId 的相同语句，则后者会被舍弃。</p>
<h2 id="mapper映射"><a href="#mapper映射" class="headerlink" title="mapper映射"></a>mapper映射</h2><p>mapper逐个注册SQL映射文件  </p>
<p>•    或者使用批量注册：</p>
<p>•    这种方式要求SQL映射文件名必须和接口名相同并且在同一目录下</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630051774191.jpg" alt="img"></p>
<h1 id="四、MyBatis-映射文件"><a href="#四、MyBatis-映射文件" class="headerlink" title="四、MyBatis-映射文件"></a>四、MyBatis-映射文件</h1><p>•    映射文件指导着MyBatis如何进行数据库增删改查， 有着非常重要的意义；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">•cache –命名空间的二级缓存配置</span><br><span class="line"></span><br><span class="line">•cache-ref – 其他命名空间缓存配置的引用。</span><br><span class="line"></span><br><span class="line">•resultMap – 自定义结果集映射</span><br><span class="line"></span><br><span class="line">•parameterMap – 已废弃！老式风格的参数映射</span><br><span class="line"></span><br><span class="line">•sql –抽取可重用语句块。</span><br><span class="line"></span><br><span class="line">•insert – 映射插入语句</span><br><span class="line"></span><br><span class="line">•update – 映射更新语句</span><br><span class="line"></span><br><span class="line">•delete – 映射删除语句</span><br><span class="line"></span><br><span class="line">•select – 映射查询语句</span><br></pre></td></tr></table></figure>



<h2 id="insert、update、delete元素"><a href="#insert、update、delete元素" class="headerlink" title="insert、update、delete元素"></a>insert、update、delete元素</h2><p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161019583.png" alt="image-20210827161019583"></p>
<p><strong>主键生成方式</strong></p>
<p>若数据库<strong>支持自动生成主键</strong>的字段（比如 MySQL 和 SQL Server），则可以设置<strong>useGeneratedKeys=”true”</strong>，然后再把<strong>keyProperty</strong> 设置到目标属性上。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161031778.png" alt="image-20210827161031778"></p>
<h2 id="主键生成方式"><a href="#主键生成方式" class="headerlink" title="主键生成方式"></a>主键生成方式</h2><p>•    而对于不支持自增型主键的数据库（例如Oracle），则可以使用 <strong>selectKey</strong> 子元素： <strong>selectKey   元素将会首先运行</strong>，<strong>id会被设置</strong>，然后插入语句会被调用</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161044356.png" alt="image-20210827161044356"></p>
<h2 id="selectKey"><a href="#selectKey" class="headerlink" title="selectKey"></a>selectKey</h2><p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161054884.png" alt="image-20210827161054884"></p>
<p><strong>参数（Parameters）传递</strong></p>
<p>•    单个参数</p>
<p>–    可以接受基本类型，对象类型，集合类型的值。这种情况</p>
<p>MyBatis可直接使用这个参数，不需要经过任何处理。</p>
<p>•    多个参数</p>
<p>–    任意多个参数，都会被MyBatis重新包装成一个Map传入。Map的key是param1，param2，0，1…，值就是参数的值。</p>
<p>•    命名参数</p>
<p>–    为参数使用@Param起一个名字，MyBatis就会将这些参数封 装进map中，key就是我们自己指定的名字</p>
<p>•    POJO</p>
<p>–    当这些参数属于我们业务POJO时，我们直接传递POJO</p>
<p>•    Map</p>
<p>–    我们也可以封装多个参数为map，直接传递</p>
<h2 id="参数处理"><a href="#参数处理" class="headerlink" title="参数处理"></a>参数处理</h2><p>参数也可以指定一个特殊的数据类型：</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161154902.png" alt="image-20210827161154902"></p>
<p>–  javaType 通常可以从参数对象中来去确定</p>
<p>–  <strong>如果</strong> <strong>null</strong> <strong>被当作值来传递，对于所有可能为空的列， jdbcType</strong> <strong>需要被设置</strong></p>
<p>–  对于数值类型，还可以设置小数点后保留的位数：</p>
<p>–  <strong>mode</strong> <strong>属性</strong>允许指定 IN，OUT 或 INOUT 参数。如果参数为 OUT 或 INOUT，参数对象属性的真实值将会被改变， 就像在获取输出参数时所期望的那样。</p>
<p><strong>参数处理</strong></p>
<p>•      <strong>参数位置支持的属性</strong></p>
<p>– javaType、jdbcType、mode、numericScale、</p>
<p>resultMap、typeHandler、jdbcTypeName、expression</p>
<p>•      <strong>实际上通常被设置的是：</strong></p>
<p><strong>可能为空的列名指定 jdbcType</strong></p>
<p>•      **#{key}<strong><strong>：获取参数的值，预编译到SQL中。</strong></strong>安全。**</p>
<p>•      **${key}<strong><strong>：获取参数的值，拼接到SQL中。</strong></strong>有SQL注入问** <strong>题。ORDER BY ${name}</strong></p>
<p><strong>select元素</strong></p>
<p>•      Select元素来定义查询操作。</p>
<p>•      Id：唯一标识符。</p>
<p>– 用来引用这条语句，需要和接口的方法名一致</p>
<p>•      parameterType：参数类型。</p>
<p>– 可以不传，MyBatis会根据TypeHandler自动推断</p>
<p>•      resultType：返回值类型。</p>
<p>– 别名或者全类名，如果返回的是集合，定义集合中元素的类型。不能和resultMap同时使用</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161223586.png" alt="image-20210827161223586"></p>
<h2 id="自动映射"><a href="#自动映射" class="headerlink" title="自动映射"></a>自动映射</h2><p>•      1、全局setting设置</p>
<p>– autoMappingBehavior默认是PARTIAL，开启自动映射 的功能。唯一的要求是列名和javaBean属性名一致</p>
<p>– 如果autoMappingBehavior设置为null则会取消自动映射</p>
<p>– 数据库字段命名规范，POJO属性符合驼峰命名法，如A_COLUMNàaColumn，我们可以开启自动驼峰命名规 则映射功能，mapUnderscoreToCamelCase=true。</p>
<p>•      <strong>2</strong>、自定义resultMap，实现高级结果集映射。**</p>
<p><strong>resultMap</strong></p>
<p>•  constructor - 类在实例化时, 用来注入结果到构造方法中</p>
<p>–   idArg - ID 参数; 标记结果作为 ID 可以帮助提高整体效能</p>
<p>–   arg - 注入到构造方法的一个普通结果</p>
<p>•  <strong>id</strong> – 一个 ID 结果; 标记结果作为 ID 可以帮助提高整体效能</p>
<p>•  <strong>result</strong> – 注入到字段或 JavaBean 属性的普通结果</p>
<p>•  <strong>association</strong> – 一个复杂的类型关联;许多结果将包成这种类型</p>
<p>–   嵌入结果映射 – 结果映射自身的关联,或者参考一个</p>
<p>•  <strong>collection</strong> – 复杂类型的集</p>
<p>–   嵌入结果映射 – 结果映射自身的集,或者参考一个</p>
<p>•  discriminator – 使用结果值来决定使用哪个结果映射</p>
<p>–   case – 基于某些值的结果映射</p>
<p>•  嵌入结果映射 – 这种情形结果也映射它本身,因此可以包含很多相同的元素,或者它可以参照一个外部的结果映射。</p>
<h2 id="id-amp-result"><a href="#id-amp-result" class="headerlink" title="id &amp; result"></a>id &amp; result</h2><p>•      id 和 result 映射一个单独列的值到<strong>简单数据类型</strong></p>
<p> (字符串,整型,双精度浮点数,日期等)的属性或字段。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161256784.png" alt="image-20210827161256784"></p>
<p><strong>association</strong></p>
<p>•      复杂对象映射</p>
<p>•   POJO中的属性可能会是一个对象<br>我们可以使用联合查询，并以级联属性的方式封 装对象。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image004-1630052005856.jpg" alt="img"></p>
<p>•      使用association标签定义对象的封装规则</p>
<p><strong>association-嵌套结果集</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161410842.png" alt="image-20210827161410842"></p>
<p><strong>association-分段查询</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161421063.png" alt="image-20210827161421063"></p>
<p>select：调用目标的方法查询当前属性的值column：将指定列的值传入目标方法</p>
<p><strong>association-分段查询&amp;延迟加载</strong></p>
<p>开启延迟加载和属性按需加载</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161442791.png" alt="image-20210827161442791"></p>
<p>•      旧版本的MyBatis需要额外的支持包</p>
<p>– asm-3.3.1.jar</p>
<p>–  cglib-2.2.2.jar</p>
<p><strong>Collection-集合类型&amp;嵌套结果集</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161459699.png" alt="image-20210827161459699"></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161504792.png" alt="image-20210827161504792"></p>
<p><strong>Collection-分步查询&amp;延迟加载</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161515100.png" alt="image-20210827161515100"></p>
<p><strong>扩展-多列值封装map传递</strong></p>
<p>•      分步查询的时候通过column指定，将对应的列的数据传递过去，我们有时需要传递多列数据。</p>
<p>•      使用{key1=column1,key2=column2…}的形式</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161532034.png" alt="image-20210827161532034"></p>
<p>•      association或者collection标签的fetchType=eager/lazy可以覆盖全局的延迟加载策略， 指定立即加载（eager）或者延迟加载（lazy）</p>
<h1 id="五、MyBatis-动态SQL"><a href="#五、MyBatis-动态SQL" class="headerlink" title="五、MyBatis-动态SQL"></a>五、MyBatis-动态SQL</h1><p>•       动态 SQL是MyBatis强大特性之一。极大的简化我们拼装 SQL的操作。</p>
<p>•       动态 SQL 元素和使用 JSTL 或其他类似基于 XML 的文本处理器相似。</p>
<p>•       MyBatis 采用功能强大的基于 OGNL 的表达式来简化操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">–  <span class="keyword">if</span></span><br><span class="line">–  choose (when, otherwise)</span><br><span class="line">–  trim (where, set)</span><br><span class="line">–  foreach</span><br></pre></td></tr></table></figure>

<h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161607269.png" alt="image-20210827161607269"></p>
<p><strong>choose (when, otherwise)</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161617091.png" alt="image-20210827161617091"></p>
<p><strong>trim (where, set)</strong></p>
<p><strong>where</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161631139.png" alt="image-20210827161631139"></p>
<p>set</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161641580.png" alt="image-20210827161641580"></p>
<p> trim</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052212611.jpg" alt="img"></p>
<p><strong>foreach</strong></p>
<p>动态 SQL 的另外一个常用的必要操作是需要对一个集合进行遍历，通常是在构建 IN 条件语句的时候</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161710542.png" alt="image-20210827161710542"></p>
<p>•       当迭代列表、集合等可迭代对象或者数组时</p>
<p>–   index是当前迭代的次数，item的值是本次迭代获取的元素</p>
<p>•       当使用字典（或者Map.Entry对象的集合）时</p>
<p>–   index是键，item是值</p>
<h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><p>•      bind 元素可以从 OGNL 表达式中创建一个变量并将其绑定到上下文。比如：</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161729831.png" alt="image-20210827161729831"></p>
<p><strong>Multi-db vendor support</strong></p>
<p>•  若在 mybatis 配置文件中配置了 databaseIdProvider , 则可以使用 “**_<strong><strong>d</strong></strong>a<strong><strong>tab</strong></strong>aseI**<strong>d</strong>”变量，这样就可以根据不同的数据库厂商构建特定的语句</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161810696.png" alt="image-20210827161810696"></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827161815376.png" alt="image-20210827161815376"></p>
<p><strong>OGNL（ Object Graph Navigation Language ）对象图导航语言，这是一种强大的****表达式语言，通过它可以非常方便的来操作对象属性。 类似于我们的EL，SpEL等</strong></p>
<p>访问对象属性：     person.name</p>
<p>调用方法：       person.getName()</p>
<p>调用静态属性/方法：   @java.lang.Math@PI</p>
<p>@java.util.UUID@randomUUID()</p>
<p>调用构造方法：     new com.atguigu.bean.Person(‘admin’).name运算符：          +,-*,/,%</p>
<p>逻辑运算符：      in,not in,&gt;,&gt;=,&lt;,&lt;=,==,!=</p>
<p>注意：xml中特殊符号如”,&gt;,&lt;等这些都需要使用转义字符</p>
<p>访问集合伪属性：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>伪属性</th>
<th>伪属性对应的Java 方法</th>
</tr>
</thead>
<tbody><tr>
<td>List、Set、Map</td>
<td>size、isEmpty</td>
<td>List/Set/Map.size(),List/Set/Map.isEmpty()</td>
</tr>
<tr>
<td>List、Set</td>
<td>iterator</td>
<td>List.iterator()、Set.iterator()</td>
</tr>
<tr>
<td>Map</td>
<td>keys、values</td>
<td>Map.keySet()、Map.values()</td>
</tr>
<tr>
<td>Iterator</td>
<td>next、hasNext</td>
<td>Iterator.next()、Iterator.hasNext()</td>
</tr>
</tbody></table>
<h1 id="六、MyBatis-缓存机制"><a href="#六、MyBatis-缓存机制" class="headerlink" title="六、MyBatis-缓存机制"></a>六、MyBatis-缓存机制</h1><p>•    MyBatis 包含一个非常强大的查询缓存特性,它可以非常方便地配置和定制。缓存可以极大的提升查询效率。</p>
<p>•    MyBatis系统中默认定义了两级缓存。</p>
<p>•    <strong>一级缓存</strong>和<strong>二级缓存</strong>。</p>
<p>–   1、默认情况下，只有一级缓存（SqlSession级别的缓存， 也称为本地缓存）开启。</p>
<p>–   2、二级缓存需要手动开启和配置，他是基于namespace级别的缓存。</p>
<p>–   3、为了提高扩展性。MyBatis定义了缓存接口Cache。我们可以通过实现Cache接口来自定义二级缓存</p>
<p><strong>一级缓存</strong></p>
<p>•    一级缓存(local cache), 即本地缓存, 作用域默认为sqlSession。当 Session flush 或 close 后, 该Session 中的所有 Cache 将被清空。</p>
<p>•    本地缓存不能被关闭, 但可以调用 clearCache() 来清空本地缓存, 或者改变缓存的作用域。在mybatis3.1之后, 可以配置本地缓存的作用域. 在 mybatis.xml 中配置</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image001.jpg" alt="img"></p>
<p><strong>一级缓存演示&amp;失效情况</strong></p>
<p>•    同一次会话期间只要查询过的数据都会保存在当 前SqlSession的一个Map中</p>
<p>•   key:hashCode+查询的SqlId+编写的sql查询语句+参数</p>
<p>•    一级缓存失效的四种情况</p>
<p>–  1、不同的SqlSession对应不同的一级缓存</p>
<p>–  2、同一个SqlSession但是查询条件不同</p>
<p>–  3、同一个SqlSession两次查询期间执行了任何一次增删改操作</p>
<p>–  4、同一个SqlSession两次查询期间手动清空了缓存</p>
<p><strong>二级缓存</strong></p>
<p>•    二级缓存(second level cache)，全局作用域缓存</p>
<p>•    二级缓存默认不开启，需要手动配置</p>
<p>•    MyBatis提供二级缓存的接口以及实现，缓存实现要求POJO实现Serializable接口</p>
<p>•    <strong>二级缓存在 SqlSession</strong> <strong>关闭或提交****之后才会生效</strong></p>
<p>•    使用步骤</p>
<p>–   1、全局配置文件中开启二级缓存</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>–   2、需要使用二级缓存的映射文件处使用cache配置缓存</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache /&gt;</span><br></pre></td></tr></table></figure>

<p>–   3、注意：POJO需要实现Serializable接口</p>
<h2 id="缓存相关属性"><a href="#缓存相关属性" class="headerlink" title="缓存相关属性"></a>缓存相关属性</h2><p>•     <strong>eviction=“FIFO”：</strong>缓存回收策略：</p>
<p>•   LRU – 最近最少使用的：移除最长时间不被使用的对象。</p>
<p>•   FIFO – 先进先出：按对象进入缓存的顺序来移除它们。</p>
<p>•   SOFT – 软引用：移除基于垃圾回收器状态和软引用规则的对象。</p>
<p>•   WEAK – 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</p>
<p>•   默认的是 LRU。</p>
<p>•     <strong>flushInterval：</strong>刷新间隔，单位毫秒</p>
<p>•   默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新</p>
<p>•     <strong>size：</strong>引用数目，正整数</p>
<p>•   代表缓存最多可以存储多少个对象，太大容易导致内存溢出</p>
<p>•     <strong>readOnly：</strong>只读，true/false</p>
<p>•   true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象 不能被修改。这提供了很重要的性能优势。</p>
<p>•   false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些， 但是安全，因此默认是 false。</p>
<h2 id="缓存有关设置"><a href="#缓存有关设置" class="headerlink" title="缓存有关设置"></a>缓存有关设置</h2><p>•     1、全局setting的cacheEnable：</p>
<p>–   配置二级缓存的开关。一级缓存一直是打开的。</p>
<p>•     2、select标签的useCache属性：</p>
<p>–   配置这个select是否使用二级缓存。一级缓存一直是使用的</p>
<p>•     3、sql标签的flushCache属性：</p>
<p>–   增删改默认flushCache=true。sql执行以后，会同时清空一级和二级缓存。</p>
<p>查询默认flushCache=false。</p>
<p>•     4、sqlSession.clearCache()：</p>
<p>–   只是用来清除一级缓存。</p>
<p>•     5、当在某一个作用域 (一级缓存Session/二级缓存 Namespaces) 进行了 C/U/D 操作后，默认该作用域下<strong>所</strong>有<strong>select 中的缓存将被clear</strong>。</p>
<p><strong>第三方缓存整合</strong></p>
<p>•      EhCache 是一个纯Java的进程内缓存框架，具有快速、精干等特点，是Hibernate中默认的CacheProvider。</p>
<p>•      MyBatis定义了Cache接口方便我们进行自定义扩展。</p>
<p>•      步骤：</p>
<p>–    1、导入ehcache包，以及整合包，日志包</p>
<p>ehcache-core-2.6.8.jar、mybatis-ehcache-1.0.3.jar</p>
<p>slf4j-api-1.6.1.jar、slf4j-log4j12-1.6.2.jar</p>
<p>–    2、编写ehcache.xml配置文件</p>
<p>–    3、配置cache标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;&gt;&lt;/cache&gt;</span><br></pre></td></tr></table></figure>

<p>•      参照缓存：若想在命名空间中共享相同的缓存配置和实例。可以使用 cache-ref 元素来引用另外一个缓存。</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052418975.jpg" alt="img"></p>
<p><strong>当执行一条查询SQL时，流程为</strong></p>
<p><strong>从二级缓存中进行查询进入一级缓存中查询执行 JDBC 查询。</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827162026702.png" alt="image-20210827162026702"></p>
<h1 id="七、MyBatis-Spring整合"><a href="#七、MyBatis-Spring整合" class="headerlink" title="七、MyBatis-Spring整合"></a>七、MyBatis-Spring整合</h1><p>1、查看不同MyBatis版本整合Spring时使用的适配包；</p>
<p><a target="_blank" rel="noopener" href="http://www.mybatis.org/spring/">http://www.mybatis.org/spring/</a></p>
<p>2、下载整合适配包<a target="_blank" rel="noopener" href="https://github.com/mybatis/spring/releases">https://github.com/mybatis/spring/releases</a></p>
<table>
<thead>
<tr>
<th><strong>MyBatis-Spring</strong></th>
<th><strong>MyBatis</strong></th>
<th><strong>Spring</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1.0.0 and 1.0.1</td>
<td>3.0.1 to 3.0.5</td>
<td>3.0.0 or higher</td>
</tr>
<tr>
<td>1.0.2</td>
<td>3.0.6</td>
<td>3.0.0 or higher</td>
</tr>
<tr>
<td>1.1.0 or higher</td>
<td>3.1.0 or higher</td>
<td>3.0.0 or higher</td>
</tr>
<tr>
<td>1.3.0  or higher</td>
<td>3.4.0  or higher</td>
<td>3.0.0  or higher</td>
</tr>
</tbody></table>
<p>•       3、官方整合示例，jpetstore <a target="_blank" rel="noopener" href="https://github.com/mybatis/jpetstore-6">https://github.com/mybatis/jpetstore-6</a></p>
<h2 id="整合关键配置"><a href="#整合关键配置" class="headerlink" title="整合关键配置"></a>整合关键配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定mybatis全局配置文件位置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis/mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定数据源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mapperLocations：所有sql映射文件所在的位置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis/mapper/*.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--typeAliasesPackage：批量别名处理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.atguigu.bean&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--自动的扫描所有的mapper的实现并加入到ioc容器中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;configure&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">&lt;!– basePackage:指定包下所有的mapper接口实现自动扫描并加入到ioc容器中--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.atguigu.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="八、MyBatis-逆向工程"><a href="#八、MyBatis-逆向工程" class="headerlink" title="八、MyBatis-逆向工程"></a>八、MyBatis-逆向工程</h1><p>•      MyBatis Generator：</p>
<p>•      简称MBG，是一个专门为MyBatis框架使用者定制的代码生成器，可以快速的根据表生成对应的映射文件，接口，以及bean类。支持基本的增删改查，以及QBC风格的条件查询。但是表连接、存储过程等这些复杂sql的定义需要我们手工编写</p>
<p>•      官方文档地址：<a target="_blank" rel="noopener" href="http://www.mybatis.org/generator/">http://www.mybatis.org/generator/</a></p>
<p>•      官方工程地址：<a target="_blank" rel="noopener" href="https://github.com/mybatis/generator/releases">https://github.com/mybatis/generator/releases</a></p>
<p>MBG使用</p>
<p>•       使用步骤：</p>
<p>1）编写MBG的配置文件（重要几处配置）</p>
<p>1）jdbcConnection配置数据库连接信息 2）javaModelGenerator配置javaBean的生成策略 3）sqlMapGenerator 配置sql映射文件生成策略4）javaClientGenerator配置Mapper接口的生成策略 5）table 配置要逆向解析的数据表</p>
<p>tableName：表名</p>
<p>domainObjectName：对应的javaBean名</p>
<p>–  2）运行代码生成器生成代码</p>
<p>•       注意：</p>
<p>Context标签</p>
<p><strong>targetRuntime=“MyBatis3“</strong>可以生成带条件的增删改查</p>
<p><strong>targetRuntime=“MyBatis3Simple“</strong>可以生成基本的增删改查</p>
<p>如果再次生成，建议将之前生成的数据删除，避免xml向后追加内容出现的问题。</p>
<h3 id="MBG配置文件"><a href="#MBG配置文件" class="headerlink" title="MBG配置文件"></a>MBG配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">//数据库连接信息配置</span><br><span class="line"><span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/bookstore0629&quot;</span> <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span> <span class="attr">password</span>=<span class="string">&quot;123456&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">//javaBean的生成策略</span><br><span class="line"><span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.atguigu.bean&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">//映射文件的生成策略</span><br><span class="line"><span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;mybatis.mapper&quot;</span>	<span class="attr">targetProject</span>=<span class="string">&quot;.\conf&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">//dao接口java文件的生成策略</span><br><span class="line"><span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.atguigu.dao&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">//数据表与javaBean的映射</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;books&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Book&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>生成器代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;(); </span><br><span class="line">    <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">	File configFile = <span class="keyword">new</span> File(<span class="string">&quot;mbg.xml&quot;</span>);</span><br><span class="line">	ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">	Configuration config = cp.parseConfiguration(configFile); </span><br><span class="line">    DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite); </span><br><span class="line">    MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">    myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试查询：</p>
<p>QBC风格的带条件查询</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	SqlSession openSession = build.openSession();</span><br><span class="line">	DeptMapper mapper = openSession.getMapper(DeptMapper.class); </span><br><span class="line">    DeptExample example = <span class="keyword">new</span> DeptExample();</span><br><span class="line">	<span class="comment">//所有的条件都在example中封装</span></span><br><span class="line">	Criteria criteria = example.createCriteria();</span><br><span class="line">	<span class="comment">//select id, deptName, locAdd from tbl_dept WHERE</span></span><br><span class="line">	<span class="comment">//( deptName like ? and id &gt; ? ) criteria.andDeptnameLike(&quot;%部%&quot;); criteria.andIdGreaterThan(2);</span></span><br><span class="line">	List&lt;Dept&gt; list = mapper.selectByExample(example); </span><br><span class="line">    <span class="keyword">for</span> (Dept dept : list) &#123;</span><br><span class="line">		System.out.println(dept);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="九MyBatis-工作原理"><a href="#九MyBatis-工作原理" class="headerlink" title="九MyBatis-工作原理"></a>九MyBatis-工作原理</h1><p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827162436930.png" alt="image-20210827162436930"></p>
<h1 id="十、MyBatis-插件开发"><a href="#十、MyBatis-插件开发" class="headerlink" title="十、MyBatis-插件开发"></a>十、MyBatis-插件开发</h1><p>•      MyBatis<strong>在四大对象的创建过程中，都会有插件进行介入。</strong>插件可以利用动态代理机制一层层的包装目标对象，而实现在目标对象执行目标方法之前进行拦截的效果。</p>
<p>•      MyBatis 允许在已映射语句执行过程中的某一点进行拦截调用。</p>
<p>•      默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">•	Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</span><br><span class="line">•	ParameterHandler (getParameterObject, setParameters)</span><br><span class="line">•	ResultSetHandler (handleResultSets, handleOutputParameters)</span><br><span class="line">•	StatementHandler (prepare, parameterize, batch, update, query)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>插件开发</p>
<p>•      插件开发步骤</p>
<p>编写插件实现Interceptor接口，并使用@Intercepts注解完成插件签名</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052927070.jpg" alt="img"></p>
<p>– 2）、在全局配置文件中注册插件</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image006.jpg" alt="img"></p>
<h2 id="插件原理"><a href="#插件原理" class="headerlink" title="插件原理"></a>插件原理</h2><p>•       1）、按照插件注解声明，按照插件配置顺序调用插件plugin方</p>
<p>法，生成被拦截对象的动态代理</p>
<p>•       2）、多个插件依次生成目标对象的代理对象，层层包裹，先声明的先包裹；形成代理链</p>
<p>  <img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630052993212.jpg" alt="img"></p>
<p>•        </p>
<p>3）、目标方法执行时依次从外到内执行插件的intercept方法。</p>
<p>•       4）、多个插件情况下，我们往往需要在某个插件中分离出目标对象。可以借助MyBatis提供的SystemMetaObject类来进行获取最后一层的h以及target属性的值</p>
<h2 id="Interceptor接口"><a href="#Interceptor接口" class="headerlink" title="Interceptor接口"></a>Interceptor接口</h2><p>•      Intercept：拦截目标方法执行</p>
<p>•      plugin：生成动态代理对象，可以使用MyBatis提供的Plugin类的wrap方法</p>
<p>•      setProperties：注入插件配置时设置的属性</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827163028567.png" alt="image-20210827163028567"></p>
<p>常用代码：</p>
<p>从代理链中分离真实被代理对象</p>
<p>1、分离代理对象。由于会形成多次代理，所以需要通过一个 while 循环分离出最终被代理对象，从而方便提取信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MetaObject metaObject = SystemMetaObject.forObject(target); <span class="keyword">while</span>(metaObject.hasGetter(<span class="string">&quot;h&quot;</span>)) &#123;</span><br><span class="line">	Object h = metaObject.getValue(<span class="string">&quot;h&quot;</span>);</span><br><span class="line">	metaObject = SystemMetaObject.forObject(h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、获取到代理对象中包含的被代理的真实对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object obj = metaObject.getValue(<span class="string">&quot;target&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>3、获取被代理对象的MetaObject方便进行信息提取 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MetaObject forObject = SystemMetaObject.forObject(obj);</span><br></pre></td></tr></table></figure>

<p>扩展：MyBatis实用场景</p>
<p>•      1）、PageHelper插件进行分页</p>
<p>•      2）、批量操作</p>
<p>•      3）、存储过程</p>
<p>•      4）、typeHandler处理枚举</p>
<p>PageHelper插件进行分页</p>
<p>•      PageHelper是MyBatis中非常方便的第三方分页插件。</p>
<p>官 方 文 档 ： <a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/README_zh.md">https://github.com/pagehelper/Mybatis-PageHelper/blob/master/README_zh.md</a></p>
<p>•      我们可以对照官方文档的说明，快速的使用插件</p>
<p>使用步骤</p>
<p>•      1、导入相关包<a target="_blank" rel="noopener" href="http://repo1.maven.org/maven2/com/github/pagehelper/pagehelper/">pagehelper-x.x.x.jar </a>和 jsqlparser-<a target="_blank" rel="noopener" href="http://repo1.maven.org/maven2/com/github/jsqlparser/jsqlparser/0.9.5/"> 0.9.5.jar。</a></p>
<p>•      2、在MyBatis全局配置文件中配置分页插件。</p>
<p> <img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image001-1630053471879.jpg" alt="img"></p>
<p>•      3、使用PageHelper提供的方法进行分页</p>
<p>•      4、可以使用更强大的PageInfo封装返回结果</p>
<p>批量操作</p>
<p>•       默认的 openSession() 方法没有参数,它会创建有如下特性的</p>
<p>–  会开启一个事务(也就是<strong>不自动提交</strong>)</p>
<p>–  连接对象会从由活动环境配置的数据源实例得到。</p>
<p>–  事务隔离级别将会使用驱动或数据源的默认设置。</p>
<p>–  预处理语句不会被复用,也不会批量处理更新。</p>
<p>•       openSession 方法的 <strong>ExecutorType</strong> 类型的参数，枚举类型:</p>
<p>–  ExecutorType.SIMPLE: 这个执行器类型不做特殊的事情（这是默认装配的）。它<strong>为每个语句的执行创建一个新的预处理语句</strong>。</p>
<p>–  ExecutorType.REUSE: 这个执行器类型<strong>会复用预处理语句</strong>。</p>
<p>–   ExecutorType.BATCH: 这个执行器会<strong>批量执行所有更新语句</strong></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image002-1630053499454.jpg" alt="img"></p>
<p>•       批量操作我们是使用MyBatis提供的BatchExecutor进行的， 他的底层就是通过jdbc攒sql的方式进行的。我们可以让他攒够一定数量后发给数据库一次。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SqlSession openSession = build.openSession(ExecutorType.BATCH); UserDao mapper = openSession.getMapper(UserDao.class);</span><br><span class="line"><span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">String name = UUID.randomUUID().toString().substring(<span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">mapper.addUser(<span class="keyword">new</span> User(<span class="keyword">null</span>, name, <span class="number">13</span>));</span><br><span class="line">&#125;</span><br><span class="line">openSession.commit(); openSession.close();</span><br><span class="line"><span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">&quot;耗时时间：&quot;</span>+(end-start));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827163935288.png" alt="image-20210827163935288"></p>
<p>•    与Spring整合中，我们推荐，额外的配置一个可以专 门用来执行批量操作的sqlSession</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827163947690.png" alt="image-20210827163947690"></p>
<p>•     需要用到批量操作的时候，我们可以注入配置的这个批量SqlSession。通过他获取到mapper映射器进行操作。</p>
<p>•     <strong>注意：</strong></p>
<p>•     1、批量操作是在session.commit()以后才发送sql语句给数据库进行执行的</p>
<p>•     2、如果我们想让其提前执行，以方便后续可能的查询操作获取数据，我们可以使用sqlSession.flushStatements()方法，让其直接冲刷到数据库进行执行。</p>
<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><p>•    实际开发中，我们通常也会写一些存储过程， MyBatis也支持对存储过程的调用</p>
<p>•    一个最简单的存储过程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create procedure test() begin</span><br><span class="line">select &#x27;hello&#x27;;</span><br><span class="line">end $$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p>•    存储过程的调用</p>
<p>1、select标签中statementType=“CALLABLE”</p>
<p>2、标签体中调用语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;call procedure_name(#&#123;param1_info&#125;,#&#123;param2_info&#125;)&#125;</span><br></pre></td></tr></table></figure>

<p><strong>存储过程-游标处理</strong></p>
<p>•     MyBatis对存储过程的游标提供了一个<strong>JdbcType=CURSOR</strong>的支持，</p>
<p>可以智能的把游标读取到的数据，映射到我们声明的结果集中</p>
<p>调用实例：</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827164217621.png" alt="image-20210827164217621"></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827164223727.png" alt="image-20210827164223727"></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">orcl.driver</span>=<span class="string">oracle.jdbc.OracleDriver orcl.url=jdbc:oracle:thin:@localhost:1521:orcl orcl.username=scott</span></span><br><span class="line"><span class="meta">orcl.password</span>=<span class="string">123456</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageEmp</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> start; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> end; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Emp&gt; emps;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;oracle_dev&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;orcl.driver&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;orcl.url&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;orcl.username&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;orcl.password&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">&quot;DB_VENDOR&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;MySQL&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;Oracle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827164942993.png" alt="image-20210827164942993"></p>
<h2 id="自定义TypeHandler处理枚举"><a href="#自定义TypeHandler处理枚举" class="headerlink" title="自定义TypeHandler处理枚举"></a>自定义TypeHandler处理枚举</h2><p>•     我们可以通过自定义TypeHandler的形式来在设置参数或者取出结果集的时候自定义参数封装策略。</p>
<p>•     步骤：</p>
<p>–   1、实现TypeHandler接口或者继承BaseTypeHandler</p>
<p>–   2、使用@MappedTypes定义处理的java类型 使用@MappedJdbcTypes定义jdbcType类型</p>
<p>–   3、在自定义结果集标签或者参数处理的时候声明使用自定义TypeHandler进行处理</p>
<p>或者在全局配置TypeHandler要处理的javaType</p>
<p>•      测试实例</p>
<p>一个代表部门状态的枚举类</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165006096.png" alt="image-20210827165006096"></p>
<p>测试全局配置EnumOrdinalTypeHandler</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165046292.png" alt="image-20210827165046292"></p>
<p>   <img src="/2021/07/10/tools-2021-07-10-MyBatis/clip_image003-1630054212655.gif" alt="img"></p>
<p>•      2、测试全局配置EnumTypeHandler</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165052918.png" alt="image-20210827165052918"></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165057673.png" alt="image-20210827165057673"></p>
<p>•      3、测试参数位置设置自定义TypeHandler</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165107889.png" alt="image-20210827165107889"></p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165112179.png" alt="image-20210827165112179"></p>
<p>自定义TypeHandler</p>
<p><img src="/2021/07/10/tools-2021-07-10-MyBatis/image-20210827165142094.png" alt="image-20210827165142094"></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/" title="MyBatis" target="_blank" rel="external">http://stary2020.gitee.io/2021/07/10/tools-2021-07-10-MyBatis/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://stary1999.github.io" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://stary1999.github.io" target="_blank"><span class="text-dark">stary</span><small class="ml-1x">愿启明星照亮信仰，照进现实</small></a></h3>
        <div>成长中的程序员，半个极客，伪文艺青年</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/07/10/java-2021-07-10-JavaSE/" title="JavaSE"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/07/10/java-2021-07-10-Spring5/" title="Spring5"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/stary" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2021 stary
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>